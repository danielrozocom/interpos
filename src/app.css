@import url('https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&display=swap');
@import 'tailwindcss/base';
@import 'tailwindcss/components';
@import 'tailwindcss/utilities';

body {
  font-family: 'Nunito', ui-sans-serif, system-ui, sans-serif;
}

@layer components {
  .btn-primary {
    @apply bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed;
  }
  
  .btn-secondary {
    @apply bg-gray-600 hover:bg-gray-700 text-white font-medium py-2 px-4 rounded-lg transition-colors duration-200;
  }
  
  .input-field {
    @apply w-full px-3 py-2 rounded-lg transition-colors duration-200;
    border: 2px solid #e5e7eb; /* slightly thicker light gray */
    border-radius: 0.75rem; /* match rounded-xl */
    background: white;
    color: #111827;
  }

  /* Ensure numeric/tel inputs follow the same visual style when used without the .input-field class */
  input[type="tel"], input[inputmode="numeric"] {
    @apply px-3 py-2 rounded-lg transition-colors duration-200;
    border: 2px solid #e5e7eb;
    border-radius: 0.75rem;
    background: white;
    color: #111827;
  }
  
  .card {
    @apply bg-white rounded-lg shadow-md p-6 border border-gray-100;
  }
  
  .step-indicator {
    @apply flex items-center justify-center w-8 h-8 rounded-full text-sm font-medium;
  }
  
  .step-active {
    @apply bg-blue-600 text-white;
  }
  
  .step-completed {
    @apply bg-green-600 text-white;
  }
  
  .step-inactive {
    @apply bg-gray-300 text-gray-600;
  }
}

/* Focus styles applied consistently for the above inputs */
.input-field:focus,
input[type="tel"]:focus,
input[inputmode="numeric"]:focus {
  outline: none;
  border-color: #35528C; /* universal blue */
  box-shadow: 0 1px 6px rgba(53, 82, 140, 0.12);
}

:root {
  /* Height of the persistent topbar. Reduced slightly to tighten vertical rhythm. */
  --topbar-h: 52px;
  /* Vertical gap between topbar and page content. Change this single variable to
    control the global spacing across all pages. Set to 20px as requested. */
  --topbar-gap: 20px;
  /* Unified border radius tokens */
  --radius-sm: 0.375rem; /* 6px */
  --radius-md: 0.5rem;   /* 8px */
  --radius-lg: 0.75rem;  /* 12px */
  --radius-xl: 1.5rem;   /* 24px - used for larger cards */
  --radius-full: 9999px; /* pill */
}

/* Respect iOS/Android safe-area insets (notch, rounded corners) */
body {
  padding-top: env(safe-area-inset-top);
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
  padding-bottom: env(safe-area-inset-bottom);
}

/* Global responsive fixes to make pages behave on narrow viewports */
/* Use border-box everywhere to avoid width/padding calculation surprises */
html, body, *, *::before, *::after {
  box-sizing: border-box;
}

/* Prevent horizontal overflow and ensure containers respect viewport */
html, body {
  width: 100%;
  overflow-x: hidden;
}

/* Ensure main content uses the header gap and never shifts horizontally */
.main-content {
  box-sizing: border-box;
  padding-top: var(--topbar-gap);
  min-height: calc(100vh - var(--topbar-h));
  overflow-x: hidden;
}

/* Images and videos should scale down on narrow screens */
img, video, svg {
  max-width: 100%;
  height: auto;
}

/* Make tables scrollable instead of breaking layout */
.table-responsive, .overflow-x-auto, table {
  max-width: 100%;
}
table { display: table; width: 100%; }

/* Form controls should be fluid by default */
input, textarea, select, button {
  max-width: 100%;
}

/* Tweak a few mobile-specific layout concerns */
@media (max-width: 767px) {
  /* Sidebar becomes a drawer covering a percentage of the screen on small devices */
  .sidebar { width: 80%; }
  .sidebar.collapsed { transform: translateX(-100%); }
  .sidebar[data-open="true"] { transform: translateX(0); }

  /* Make nav link text wrap if needed */
  .nav-link { white-space: normal; }

  /* Ensure main content padding is not zeroed incorrectly on very small screens */
  .main-content { padding-left: 12px; padding-right: 12px; }
}

/* Normalize top spacing inside the main content area.
   Some pages add large top margins or padding on their first child which
   can push the whole page down. Remove the top margin of the first
   direct child to ensure consistent spacing relative to the header.
   If you need a gap, adjust --topbar-gap and the padding-top on .main-content. */
.main-content > :first-child {
  margin-top: 0 !important;
}

/* Normalize common large spacing utilities inside the main app content
   to produce a more compact, consistent vertical rhythm below the header.
   These are intentionally conservative reductions (not zero) and use
   !important to override Tailwind utility classes where necessary. */
.main-content .py-8 { padding-top: 1rem !important; padding-bottom: 1rem !important; }
.main-content .py-6 { padding-top: 0.75rem !important; padding-bottom: 0.75rem !important; }
.main-content .pt-8 { padding-top: 1rem !important; }
.main-content .pt-6 { padding-top: 0.75rem !important; }
.main-content .mb-8 { margin-bottom: 1rem !important; }
.main-content .mb-6 { margin-bottom: 0.75rem !important; }
.main-content .mb-4 { margin-bottom: 0.5rem !important; }
.main-content .mt-6 { margin-top: 0.75rem !important; }
.main-content .mt-4 { margin-top: 0.5rem !important; }
.main-content .mt-2 { margin-top: 0.25rem !important; }

/* Reduce top margins for headings inside main content so they don't push layout down */
.main-content h1,
.main-content h2,
.main-content h3 {
  margin-top: 0 !important;
  margin-bottom: 0.35rem !important;
}

/* Ensure direct children don't carry large top margins (extra defense) */
.main-content > * {
  margin-top: 0 !important;
}

/* Force no top padding on children so tailwind pt-* inside the first-level containers
   can't push the page down. The only vertical offset from the header should be
   from --topbar-gap controlled on .main-content itself. */
.main-content > * {
  padding-top: 0 !important;
}

/* Additional strict rule for elements that may set inline styles or utility classes
   for spacing — explicitly neutralize common top spacing properties at first level. */
.main-content > *[class*="pt-"] {
  padding-top: 0 !important;
}
.main-content > *[class*="mt-"] {
  margin-top: 0 !important;
}
.main-content > *[class*="py-"] {
  padding-top: 0 !important;
  padding-bottom: 0 !important;
}

/* Shared UI elements (copied from users page) */
.card .relative button[aria-label="Limpiar búsqueda"] {
  background: transparent;
  border: none;
  padding: 0.25rem;
}

.search-icon { z-index:20; color:#9CA3AF; pointer-events:none; transition:none; opacity:1 }
.relative:focus-within .search-icon { color:#6B7280; opacity:1 }

.input-with-icon { padding-left: 3rem; /* increased from 2.5rem to 3rem (~48px) to avoid overlap with placeholder */ }

/* ensure icon container is placed slightly more left so it doesn't sit over placeholder text */
.search-icon { position: absolute; left: 0.25rem; top: 50%; transform: translateY(-50%); display:inline-flex; align-items:center; justify-content:center }
.relative { position: relative }

/* Theme/token-specific adjustments requested by user */
.input-with-icon.s-xAzoHdC_kP8W {
  padding-left: 2.5rem;
}

.input-field.s-xAzoHdC_kP8W {
  width: 100%;
  padding: 0.75rem 1rem 0.75rem 2.25rem;
  border-radius: var(--radius-lg);
  border: 1px solid #e5e7eb;
  font-size: 0.875rem;
  transition: none;
  background: white;
  color: #1f2937;
}

.btn-primary { background: #35528C; color: white; border: none; border-radius: var(--radius-md); padding: 0.5rem 1rem; font-weight:600; display:inline-flex; align-items:center; gap:0.5rem }
.btn-primary:hover { transform:none; box-shadow:none }
.btn-secondary { background: white; color: #35528C; border: 2px solid #35528C; border-radius:var(--radius-md); padding:0.5rem 1rem; font-weight:600; display:inline-flex; align-items:center; gap:0.5rem }
.btn-secondary:hover { background:white; color:#35528C; transform:none }
.btn-sm { padding:0.375rem; border-radius:var(--radius-sm); font-size:0.875rem }
.table-cell .btn-sm { padding:0.45rem 0.5rem; min-width:36px; min-height:36px; border-radius:var(--radius-md); display:inline-flex; align-items:center; justify-content:center }
.table-cell .btn-sm svg { width:18px !important; height:18px !important }
.btn-add { padding:0.75rem 1rem; border-radius:var(--radius-lg); font-size:0.95rem; display:inline-flex; align-items:center; gap:0.5rem }

/* Keep btn-add color stable on hover (user requested no hover color change) */
.btn-add { background: linear-gradient(135deg, #35528C 0%, #4668a5 100%); color: white; }
.btn-add:hover { background: linear-gradient(135deg, #35528C 0%, #4668a5 100%); transform:none; }

/* Modal save button styling: use #40619D and no hover color change */
.modal-content .btn-primary { background: #40619D !important; color: #fff !important; }
.modal-content .btn-primary:hover { background: #40619D !important; color: #fff !important; transform:none !important; }

@media (max-width:640px) {
  .btn-add { width:100%; justify-content:center; padding:0.85rem 1rem }
  .modal-content { margin:1rem; max-height:calc(100vh - 2rem); overflow:auto; border-radius:var(--radius-lg) }
  .btn-primary svg, .btn-secondary svg, .btn-add svg, .btn-sm svg, .table-cell svg, .search-icon svg { width:18px !important; height:18px !important }
  .actions-cell .btn-sm svg { width:16px !important; height:16px !important }
  .table-cell .btn-sm { min-width:40px; min-height:40px; padding:0.45rem }
  .table-cell .h-4, .table-cell .w-4 { width:18px !important; height:18px !important }
  .status-badge { min-width:72px; padding:0.3rem 0.45rem; font-size:0.825rem }
}

/* Price color specific for products table */
.table-cell .price-highlight, .product-price { color: #40619D !important; }

.modal-content .input-field { padding-left:1rem }

/* Shared selected-row class for tables across the app */
.row-selected {
  background: rgba(53,82,140,0.02);
  box-shadow: none;
  border-left: 3px solid rgba(53,82,140,0.12);
  transition: background-color 0.12s ease, border-color 0.12s ease;
}

/* Modal overlay/scroll adjustments: ensure overlays appear above the header and content is centered
   Set a very high z-index so modals always supersede the fixed header (header uses z-index:1000). */
.modal-overlay {
  display: flex;
  align-items: center; /* vertically center modal */
  justify-content: center; /* horizontally center modal */
  /* Reserve space for the fixed header so the modal doesn't sit under it on small viewports.
     We use calc to subtract the header height and a gap from the top inset. */
  padding: calc(var(--topbar-gap, 20px) + 1rem) 2rem; /* top/bottom, left/right */
  position: fixed !important;
  inset: 0 !important;
  z-index: 2000 !important; /* must be above header (1000) */
}

.modal-overlay .modal-content {
  /* ensure modal content sits above the overlay and can scroll internally */
  max-height: calc(100vh - (var(--topbar-gap, 20px) + var(--topbar-h, 52px) + 2rem));
  overflow: auto;
  position: relative;
  z-index: 2001;
}

/* Global scroll lock to use when any modal is open. Add/remove the class on html/body to prevent
   background scrolling (covers desktop and mobile/touch). 
   Note: body positioning is handled in JS to preserve scroll position. */
html.modal-open, body.modal-open {
  overflow: hidden !important;
  touch-action: none !important;
}

/* Card aesthetic token to match users page */
.card.s-xAzoHdC_kP8W {
  background: rgba(255, 255, 255, 0.95);
  -webkit-backdrop-filter: blur(12px);
  backdrop-filter: blur(12px);
  border-radius: var(--radius-xl);
  box-shadow: 0 4px 24px -1px rgba(53, 82, 140, 0.1), 0 2px 8px -1px rgba(53, 82, 140, 0.06);
  border: 1px solid rgba(53, 82, 140, 0.08);
  padding: 1.5rem;
}

/* Force table text inside tokenized cards to 16px for consistent sizing */
.card.s-xAzoHdC_kP8W table,
.card.s-xAzoHdC_kP8W .table-cell,
.card.s-xAzoHdC_kP8W .table-header {
  font-size: 16px; /* 16px = 1rem (depending on root), explicit px as requested */
}

/* Products page specific sizing: ensure all table text inside products page is 16px */
.products-page table,
.products-page .table-cell,
.products-page .table-header,
.products-page .table-cell > div,
.products-page .table-cell span,
.products-page .table-cell .font-medium,
.products-page .table-cell .text-sm,
.products-page .table-cell .text-gray-600 {
  font-size: 16px !important; /* explicit 16px per user's request */
}

.table-header { padding:1rem; text-align:center; font-weight:700; color:#35528C; text-transform:uppercase; letter-spacing:0.05em; font-size:15px; user-select:none }
.table-header:hover { background: rgba(53,82,140,0.05) }
.table-header > div { display:flex; align-items:center; justify-content:center; gap:0.5rem }
.table-header.text-right > div { justify-content:flex-end }
.table-header.text-left > div { justify-content:flex-start }
.table-cell { padding:1rem; white-space:nowrap; font-size:0.875rem }
.name-cell { text-align:left; vertical-align:middle }
.status-cell { text-align:center; vertical-align:middle }
.actions-cell { text-align:center; vertical-align:middle }
.status-badge { display:inline-flex; align-items:center; justify-content:center; padding:0.35rem 0.5rem; border-radius:var(--radius-full); font-size:0.875rem; font-weight:700; line-height:1; min-width:96px; max-width:100%; white-space:nowrap; text-align:center; overflow:hidden; text-overflow:ellipsis }
.status-positive { background:#ecfdf5; color:#065f46 }
.status-neutral { background:#f3f4f6; color:#374151 }
.status-negative { background:#fff7f6; color:#7f1d1d }
.actions-cell .btn-sm { background: linear-gradient(135deg, #35528C 0%, #4668a5 100%); color: white; border: none }

button:disabled { opacity:0.6; cursor:not-allowed; transform:none !important }

.pagination-info { margin-top:1.25rem; padding-top:0.25rem }
@media (max-width:640px) { .pagination-info { margin-top:1rem; font-size:0.875rem } }

